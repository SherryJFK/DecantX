(function(g){class r extends HTMLElement{constructor(){super();setTimeout(()=>{theme.AssetsLoader.onScrollOrUserAction(this,()=>{this.load()})},0)}load(){function m(b,d,n){e&&e.abort();d&&theme.Preloader.set(a);var t=b.attr("data-collection"),h=a.attr("data-limit"),p=a.attr("data-grid");e=g.ajax({type:"GET",url:theme.routes.root_url+"collections/"+t,cache:!1,data:{view:"sorting",count_limit:h,grid_classes:encodeURIComponent(p)},dataType:"html",success:function(c){a.html(c);if(a[0].hasAttribute("data-is-design-mode")&&
(c=a.children(),c.addClass(p),c.length>h))for(var k=h;k<c.length;k++)c.eq(k).remove();theme.LazyImage.update();theme.MultiCurrency&&theme.MultiCurrency.update();l.find("a").removeClass("active");b.addClass("active");f&&f.text(theme.strings.homepage.sorting_collections.button_more_products.replace("{{ collection }}",b.text())).attr("href",b.attr("href"));d&&theme.Preloader.unset(a);e=null;n&&n()}})}this.$container=g(this);var l=this.$container.find("[data-sorting-collections-control]"),q=this.$container.find("[data-sorting-collections-ajax] [data-collection]"),
a=this.$container.find("[data-sorting-collections-items]"),f=this.$container.find("[data-sorting-collections-more]"),e=null;this.$control=l;q.length&&m(q.first(),!1,function(){f.length&&f.removeClass("invisible")});l.on("click","a",function(b){var d=g(this);d.hasClass("active")||m(d,!0);b.preventDefault();return!1})}disconnectedCallback(){this.$control.off()}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("sorting-collections",r)})})(jQueryTheme);
