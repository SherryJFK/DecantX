(function(m){function n(a){if("ESCAPE"===a.code.toUpperCase()&&(a=a.target.closest("details[open]"))){var b=a.querySelector("summary");a.removeAttribute("open");b.focus()}}class p extends HTMLElement{constructor(){super();this.filterData=[];this.onActiveFilterClick=this.onActiveFilterClick.bind(this);this.debouncedOnSubmit=theme.debounce(b=>{this.onSubmitHandler(b)},500);this.querySelector("form").addEventListener("input",this.debouncedOnSubmit.bind(this));window.addEventListener("popstate",this.onHistoryChange.bind(this));
const a=this.querySelector("#FacetsWrapperDesktop");a&&a.addEventListener("keyup",n)}onSubmitHandler(a){a.preventDefault();var b=new FormData(a.target.closest("form"));b=(new URLSearchParams(b)).toString();this.renderPage(b,a)}onActiveFilterClick(a){a.preventDefault();const b=a.currentTarget.classList.contains("js-append-content");if(!Shopify.designMode||!b){var d=a.currentTarget.classList.contains("js-use-full-href"),c=!b,e=a.currentTarget.closest("collection-pagination")&&!b;this.toggleActiveFacets();
this.renderPage((new URL(a.currentTarget.href)).searchParams.toString(),d?a:null,c,{appendContent:b,scrollToTop:e})}}onHistoryChange(a){const b=a.state?a.state.searchParams:"";a.isHistoryChange=!0;this.renderPage(b,a,!1)}toggleActiveFacets(a=!0){document.querySelectorAll(".js-facet-remove").forEach(b=>{b.classList.toggle("disabled",a)})}startRender(){this.isLoading=!0;theme.Preloader.set(document.getElementById("CollectionProductGrid").parentNode,{fixed:!0,spinner:theme.current.is_mobile?!1:null});
theme.current.is_mobile&&theme.Preloader.set(document.getElementById("CollectionSidebar"),{fixed:!0})}endRender(){theme.Preloader.unset(document.getElementById("CollectionProductGrid").parentNode);theme.current.is_mobile&&theme.Preloader.unset(document.getElementById("CollectionSidebar"));this.isLoading=!1}renderPage(a,b,d=!0,c={}){this.startRender();const e=this.getSections(),f=document.getElementById("CollectionProductCount"),k=document.getElementById("CollectionProductCountDesktop");let g,h;document.getElementById("CollectionProductGrid").classList.add("loading");
f&&f.classList.add("loading");k&&k.classList.add("loading");b&&(!b.isHistoryChange&&b.currentTarget&&b.currentTarget.classList.contains("js-use-full-href")&&(g=b.currentTarget.href),b.isCollectionChanged||b.state&&b.state.isCollectionChanged)&&(h=`${g?g:window.location.pathname}${a?"?":""}${a}`);!theme.collection.enable_ajax||b&&b.reloadCollection||Shopify.designMode&&!c.appendContent?(h||=`${g?g:window.location.pathname}${a?"?":""}${a}`,window.location.href=h):(e.forEach(l=>{h||=`${g?g:window.location.pathname}?section_id=${l.section}&${a}`;
l=q=>q.url===h;this.filterData.some(l)?this.renderSectionFromCache(l,b,c):this.renderSectionFromFetch(h,b,c)}),d&&this.updateURLHash(a,g))}renderSectionFromFetch(a,b,d){fetch(a).then(c=>c.text()).then(c=>{c=c.replace(/<script[^>]*>(?:(?!<\/script>)[^])*<\/script>/g,"");this.filterData=[...this.filterData,{html:c,url:a}];this.renderNavigation(c);this.renderShFilters(c);this.renderFilterSections(c);this.renderFilters(c,b);this.renderHeadings(c,b);this.renderProductGrid(c,b,d);this.renderProductCount(c);
this.renderPagination(c);this.renderBreadcrumbs(c);this.endRender()})}renderSectionFromCache(a,b,d){a=this.filterData.find(a).html;this.renderNavigation(a);this.renderShFilters(a);this.renderFilterSections(a);this.renderFilters(a,b);this.renderHeadings(a,b);this.renderProductGrid(a,b,d);this.renderProductCount(a);this.renderPagination(a);this.renderBreadcrumbs(a);this.endRender()}renderHeadings(a,b){b&&(b.isCollectionChanged||b.state&&b.state.isCollectionChanged)&&(a=(new DOMParser).parseFromString(a,
"text/html"),renderCollectionPageHeadings(a,!0),theme.AssetsLoader.loadInlineStyles(),document.querySelectorAll('[data-section-type="collection-page-heading"]').forEach(d=>d.addEventListener("section:loaded",function(){theme.StickySidebar&&theme.StickySidebar.update(null,1)})))}renderBuilders(a,b,d){b&&b.isCollectionChanged||b&&b.state&&b.state.isCollectionChanged?(a=(new DOMParser).parseFromString(a,"text/html"),renderCollectionPageBuilders(a,!1,!0),document.querySelectorAll(".collection-page-builder-template--type-insert").forEach(c=>
c.remove()),a.querySelectorAll(".collection-page-builder-template--type-insert").forEach(c=>document.body.appendChild(c.cloneNode(!0)))):d.appendContent||renderCollectionPageBuilders(void 0,!0,!0)}renderProductGrid(a,b,d){var c=(new DOMParser).parseFromString(a,"text/html");const e=document.getElementById("CollectionProductGrid"),f=c.getElementById("CollectionProductGrid");theme.StickySidebar&&theme.StickySidebar.update("listener-enable");theme.ProductsView&&theme.ProductsView.update(c);d.appendContent?
e.innerHTML+=f.innerHTML:(e.innerHTML=f.innerHTML,e.setAttribute("class",f.getAttribute("class")));d.scrollToTop&&(c=(c=document.querySelector("sticky-header"))&&c.getStickyHeight?c.getStickyHeight():0,$html.add($body).stop().animate({scrollTop:m(e).offset().top-c,duration:1E3*theme.animations.pagination.scroll_duration}));this.renderBuilders(a,b,d);theme.LazyImage.update();theme.MultiCurrency&&theme.MultiCurrency.update();theme.StickySidebar&&(theme.StickySidebar.update("listener-process"),theme.StickySidebar.update("listener-disable"));
theme.Tooltip&&theme.Tooltip.init();document.getElementById("CollectionProductGrid").classList.remove("loading")}renderProductCount(a){a=(new DOMParser).parseFromString(a,"text/html");const b=a.getElementById("CollectionProductCount"),d=document.getElementById("CollectionProductCount"),c=document.getElementById("CollectionProductCountDesktop"),e=document.getElementById("CollectionProductCountMobileFilterButton");d&&(d.innerHTML=b.innerHTML,d.classList.remove("loading"));c&&(c.innerHTML=b.innerHTML,
c.classList.remove("loading"));e&&(e.innerHTML=a.getElementById("CollectionProductCountMobileFilterButton").innerHTML)}renderFilters(a,b){a=(new DOMParser).parseFromString(a,"text/html");var d=!0;window.checkFilterAccordion&&theme.current.is_desktop&&window.checkFilterAccordion(a,!0);if(b&&(b.isCollectionChanged||b.state&&b.state.isCollectionChanged)){d=!1;var c=a.querySelector("#CollectionFiltersForm");c&&(theme.RangeOfPrice&&theme.RangeOfPrice.destroy(),document.querySelector("#CollectionFiltersForm").innerHTML=
c.innerHTML,theme.RangeOfPrice&&theme.RangeOfPrice.init())}if(d){c=a.querySelectorAll("#CollectionFiltersForm .js-filter, #CollectionFiltersFormMobile .js-filter");const e=f=>{const k=b&&!b.isHistoryChange?b.target.closest(".js-filter"):void 0;return k?f.dataset.index===k.dataset.index:!1};d=Array.from(c).filter(f=>!e(f));c=Array.from(c).find(e);d.forEach(f=>{document.querySelector(`.js-filter[data-index="${f.dataset.index}"]`).innerHTML=f.innerHTML});c&&this.renderCounts(c,b.target.closest(".js-filter"));
theme.RangeOfPrice&&theme.RangeOfPrice.update()}this.renderActiveFacets(a);this.renderAdditionalElements(a)}renderFilterSections(a){const b=(new DOMParser).parseFromString(a,"text/html");a=document.querySelectorAll(".js-collection-sidebar-section");a.length&&a.forEach(d=>{const c=b.querySelector(`.js-collection-sidebar-section[data-index="${d.dataset.index}"]`);c&&(c.classList.contains("d-none")?d.classList.add("d-none"):d.classList.remove("d-none"))})}renderShFilters(a){const b=(new DOMParser).parseFromString(a,
"text/html");a=document.querySelectorAll(".js-sh-filter");a.length&&a.forEach(d=>{const c=b.querySelector(`.js-sh-filter[data-index="${d.dataset.index}"]`);c&&(d.innerHTML=c.innerHTML)})}renderNavigation(a){var b=document.getElementById("CollectionLinksForm");if(b){b=b.querySelectorAll("input");var d=(new DOMParser).parseFromString(a,"text/html").querySelectorAll("#CollectionLinksForm input");b.forEach((c,e)=>{c.checked=d[e].checked;c.checked&&(c=c.closest("[data-js-accordion]"))&&(c=c.querySelector("[data-js-accordion-button]"),
c.classList.contains("open")||m(c).trigger("toggle"))})}}renderActiveFacets(a){["#CollectionCurrentFilters","#CollectionCurrentFiltersClone"].forEach(b=>{const d=a.querySelector(b);d&&(document.querySelector(b).innerHTML=d.innerHTML)});this.toggleActiveFacets(!1)}renderPagination(a){a=(new DOMParser).parseFromString(a,"text/html");document.getElementById("CollectionPagination").innerHTML=a.getElementById("CollectionPagination").innerHTML}renderBreadcrumbs(a){a=(new DOMParser).parseFromString(a,"text/html");
const b=document.getElementById("CollectionBreadcrumbs");b&&(b.innerHTML=a.getElementById("CollectionBreadcrumbs").innerHTML)}renderAdditionalElements(a){[".mobile-facets__open",".mobile-facets__count",".sorting"].forEach(b=>{a.querySelector(b)&&(document.querySelector(b).innerHTML=a.querySelector(b).innerHTML)})}renderCounts(a,b){[".count-bubble",".facets__selected"].forEach(d=>{const c=b.querySelector(d);a.querySelector(d)&&c&&(b.querySelector(d).outerHTML=a.querySelector(d).outerHTML)})}updateURLHash(a,
b){b?history.pushState({searchParams:a},"",`${b}`):history.pushState({searchParams:a},"",`${window.location.pathname}${a&&"?".concat(a)}`)}getSections(){return[{id:"main-collection-product-grid",section:document.getElementById("main-collection-product-grid").dataset.id}]}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("collection-filters-form",p)});class r extends HTMLElement{constructor(){super();this.querySelectorAll("input").forEach(a=>a.addEventListener("change",this.onRangeChange.bind(this)));
this.setMinAndMaxValues()}onRangeChange(a){this.adjustToValidValues(a.currentTarget);this.setMinAndMaxValues()}setMinAndMaxValues(){var a=this.querySelectorAll("input");const b=a[0];a=a[1];a.value&&b.setAttribute("max",a.value);b.value&&a.setAttribute("min",b.value);""===b.value&&a.setAttribute("min",0);""===a.value&&b.setAttribute("max",a.getAttribute("max"))}adjustToValidValues(a){const b=Number(a.value),d=Number(a.getAttribute("min")),c=Number(a.getAttribute("max"));b<d&&(a.value=d);b>c&&(a.value=
c)}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("price-range",r)});class t extends HTMLElement{constructor(){super();this.querySelector("a").addEventListener("click",a=>{a.preventDefault();(this.closest("collection-filters-form")||document.querySelector("collection-filters-form")).onActiveFilterClick(a)})}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("facet-remove",t)});class u extends HTMLElement{constructor(){super();this.debouncedOnSubmit=theme.debounce(a=>
{this.onSubmitHandler(a)},500);this.querySelector("form").addEventListener("input",this.debouncedOnSubmit.bind(this))}onSubmitHandler(a){a.preventDefault();const b=a.target.value,d=a.target.closest("#CollectionLinksForm"),c=document.querySelector("collection-filters-form");var e=new FormData(c.querySelector("form"));e=(new URLSearchParams(e)).toString();d?(history.replaceState({searchParams:e,isCollectionChanged:!0},"",window.location.href),history.pushState({searchParams:e,isCollectionChanged:!0},
"",b),c.onHistoryChange({isCollectionChanged:!0,reloadCollection:a.target.classList.contains("js-reload-collection")})):(history.pushState({searchParams:e},"",b),c.onHistoryChange({}))}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("collection-navigation-form",u)});class v extends HTMLElement{constructor(){super();this.debouncedOnSubmit=theme.debounce(a=>{this.onSubmitHandler(a)},500);this.querySelector("form").addEventListener("input",this.debouncedOnSubmit.bind(this))}onSubmitHandler(a){a.preventDefault();
a=new FormData(a.target.closest("form"));const b=document.querySelector("collection-filters-form");b.querySelector('[name="sort_by"]').value=a.get("sort_by_clone");b.querySelector("form").dispatchEvent(new Event("input"))}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("collection-sorting-clone-form",v)});class w extends HTMLElement{constructor(){super();this.querySelector("a").addEventListener("click",this.goToPage.bind(this));this.querySelector("a").addEventListener("loadmore",
this.goToPage.bind(this))}goToPage(a){a.preventDefault();document.querySelector("collection-filters-form").onActiveFilterClick(a)}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("collection-pagination-item",w)});class x extends HTMLElement{constructor(){super();"infinite_scroll"===this.dataset.paginationType&&setTimeout(()=>window.addEventListener("scroll",this.onInfiniteScroll.bind(this)),500)}onInfiniteScroll(){if(this.getBoundingClientRect().top<theme.current.height){var a=document.querySelector("collection-filters-form");
a&&!a.isLoading&&(a=this.querySelector("a"))&&a.dispatchEvent(new Event("loadmore"))}}}theme.AssetsLoader.onPageLoaded(function(){customElements.define("collection-pagination",x)})})(jQueryTheme);
